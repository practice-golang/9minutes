import{s as rt,n as $,r as dt}from"../chunks/scheduler.e108d1fd.js";import{S as it,i as ct,g as u,s as C,h as a,y as M,c as T,j as E,f as p,k as s,z as J,a as j,x as e,A as K,B as st,e as lt,m as Q,n as V}from"../chunks/index.7e31c220.js";function nt(o){return(o==null?void 0:o.length)!==void 0?o:Array.from(o)}const pt=async({fetch:o})=>{let t={};const n=await o("/api/admin/user-columns",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});return n.ok&&(t=await n.json()),{columns:t}},kt=Object.freeze(Object.defineProperty({__proto__:null,load:pt},Symbol.toStringTag,{value:"Module"}));function ot(o,t,n){const i=o.slice();return i[12]=t[n],i[14]=n,i}function ut(o){let t,n,i=" ",h,c,f,_,N,x,v,m,g,S,w,b,O,D,B,A,z=" ",R,U,P,H="Cancel",G,y,q="Save",I,r;return{c(){t=u("tr"),n=u("td"),n.textContent=i,h=C(),c=u("td"),f=u("input"),_=C(),N=u("td"),x=u("input"),v=C(),m=u("td"),g=u("input"),w=C(),b=u("td"),O=u("input"),B=C(),A=u("td"),A.textContent=z,R=C(),U=u("td"),P=u("button"),P.textContent=H,G=C(),y=u("button"),y.textContent=q,this.h()},l(d){t=a(d,"TR",{id:!0});var l=E(t);n=a(l,"TD",{"data-svelte-h":!0}),M(n)!=="svelte-mcho4g"&&(n.textContent=i),h=T(l),c=a(l,"TD",{});var L=E(c);f=a(L,"INPUT",{type:!0,name:!0,placeholder:!0}),L.forEach(p),_=T(l),N=a(l,"TD",{});var k=E(N);x=a(k,"INPUT",{type:!0,name:!0,placeholder:!0}),k.forEach(p),v=T(l),m=a(l,"TD",{});var Y=E(m);g=a(Y,"INPUT",{type:!0,name:!0,onchange:!0,list:!0,placeholder:!0}),Y.forEach(p),w=T(l),b=a(l,"TD",{});var F=E(b);O=a(F,"INPUT",{type:!0,name:!0,placeholder:!0}),F.forEach(p),B=T(l),A=a(l,"TD",{"data-svelte-h":!0}),M(A)!=="svelte-mcho4g"&&(A.textContent=z),R=T(l),U=a(l,"TD",{});var X=E(U);P=a(X,"BUTTON",{type:!0,"data-svelte-h":!0}),M(P)!=="svelte-1k872l3"&&(P.textContent=H),G=T(X),y=a(X,"BUTTON",{type:!0,"data-svelte-h":!0}),M(y)!=="svelte-fh99wb"&&(y.textContent=q),X.forEach(p),l.forEach(p),this.h()},h(){s(f,"type","text"),s(f,"name","display-name"),s(f,"placeholder","Display name"),s(x,"type","text"),s(x,"name","column-code"),s(x,"placeholder","Column code"),s(g,"type","text"),s(g,"name","column-type"),g.value=S=o[2]["column-type"],s(g,"onchange","restrictDatalist(this)"),s(g,"list","column-types"),s(g,"placeholder","Column type"),s(O,"type","text"),s(O,"name","column-name"),O.value=D=o[2]["column-name"],s(O,"placeholder","Column name"),s(P,"type","button"),s(y,"type","button"),s(t,"id","add-column")},m(d,l){j(d,t,l),e(t,n),e(t,h),e(t,c),e(c,f),J(f,o[2]["display-name"]),e(t,_),e(t,N),e(N,x),J(x,o[2]["column-code"]),e(t,v),e(t,m),e(m,g),e(t,w),e(t,b),e(b,O),e(t,B),e(t,A),e(t,R),e(t,U),e(U,P),e(U,G),e(U,y),I||(r=[K(f,"input",o[8]),K(x,"input",o[9]),K(P,"click",o[4]),K(y,"click",o[5])],I=!0)},p(d,l){l&4&&f.value!==d[2]["display-name"]&&J(f,d[2]["display-name"]),l&4&&x.value!==d[2]["column-code"]&&J(x,d[2]["column-code"]),l&4&&S!==(S=d[2]["column-type"])&&g.value!==S&&(g.value=S),l&4&&D!==(D=d[2]["column-name"])&&O.value!==D&&(O.value=D)},d(d){d&&p(t),I=!1,dt(r)}}}function ht(o){let t,n,i,h,c,f,_,N,x,v,m,g,S,w,b,O,D,B,A,z=o[12]["sort-order"]+"",R,U,P,H,G="Cancel",y,q,I="Save",r,d,l;return{c(){t=u("tr"),n=u("td"),i=C(),h=u("td"),c=u("input"),f=C(),_=u("td"),N=u("input"),x=C(),v=u("td"),m=u("input"),g=C(),S=u("td"),w=u("input"),b=C(),O=u("td"),D=u("input"),B=C(),A=u("span"),R=Q(z),U=C(),P=u("td"),H=u("button"),H.textContent=G,y=C(),q=u("button"),q.textContent=I,r=C(),this.h()},l(L){t=a(L,"TR",{"lr-if":!0});var k=E(t);n=a(k,"TD",{}),E(n).forEach(p),i=T(k),h=a(k,"TD",{});var Y=E(h);c=a(Y,"INPUT",{type:!0,name:!0,placeholder:!0}),Y.forEach(p),f=T(k),_=a(k,"TD",{});var F=E(_);N=a(F,"INPUT",{type:!0,name:!0,placeholder:!0}),F.forEach(p),x=T(k),v=a(k,"TD",{});var X=E(v);m=a(X,"INPUT",{type:!0,name:!0,onchange:!0,list:!0,placeholder:!0}),X.forEach(p),g=T(k),S=a(k,"TD",{});var tt=E(S);w=a(tt,"INPUT",{type:!0,name:!0,placeholder:!0}),tt.forEach(p),b=T(k),O=a(k,"TD",{});var W=E(O);D=a(W,"INPUT",{type:!0,name:!0}),B=T(W),A=a(W,"SPAN",{});var et=E(A);R=V(et,z),et.forEach(p),W.forEach(p),U=T(k),P=a(k,"TD",{});var Z=E(P);H=a(Z,"BUTTON",{type:!0,"data-svelte-h":!0}),M(H)!=="svelte-qr4i42"&&(H.textContent=G),y=T(Z),q=a(Z,"BUTTON",{type:!0,onclick:!0,"data-svelte-h":!0}),M(q)!=="svelte-12kwy68"&&(q.textContent=I),Z.forEach(p),r=T(k),k.forEach(p),this.h()},h(){s(c,"type","text"),s(c,"name","display-name"),c.value=o[12]["display-name"],s(c,"placeholder","Display name"),s(N,"type","text"),s(N,"name","column-code"),N.value=o[12]["column-code"],s(N,"placeholder","Column code"),s(m,"type","text"),s(m,"name","column-type"),m.value=o[12]["column-type"],s(m,"onchange","restrictDatalist(this)"),s(m,"list","column-types"),s(m,"placeholder","Column type"),m.disabled=!0,s(w,"type","text"),s(w,"name","column-name"),w.value=o[12]["column-name"],s(w,"placeholder","Column name"),s(D,"type","hidden"),s(D,"name","sort-order"),D.value=o[12]["sort-order"],s(H,"type","button"),s(q,"type","button"),s(q,"onclick","updateColumn()"),s(t,"lr-if","columnEditIndex == $index")},m(L,k){j(L,t,k),e(t,n),e(t,i),e(t,h),e(h,c),e(t,f),e(t,_),e(_,N),e(t,x),e(t,v),e(v,m),e(t,g),e(t,S),e(S,w),e(t,b),e(t,O),e(O,D),e(O,B),e(O,A),e(A,R),e(t,U),e(t,P),e(P,H),e(P,y),e(P,q),e(t,r),d||(l=K(H,"click",o[11]),d=!0)},p:$,d(L){L&&p(t),d=!1,l()}}}function mt(o){let t,n,i,h=o[12]["display-name"]+"",c,f,_,N=o[12]["column-code"]+"",x,v,m,g=o[12]["column-type"]+"",S,w,b,O=o[12]["column-name"]+"",D,B,A,z=o[12]["sort-order"]+"",R,U,P;function H(d,l){return d[14]<=6?_t:ft}let y=H(o)(o);function q(d,l){return d[14]<=6?yt:vt}let r=q(o)(o);return{c(){t=u("tr"),y.c(),n=C(),i=u("td"),c=Q(h),f=C(),_=u("td"),x=Q(N),v=C(),m=u("td"),S=Q(g),w=C(),b=u("td"),D=Q(O),B=C(),A=u("td"),R=Q(z),U=C(),r.c(),P=C(),this.h()},l(d){t=a(d,"TR",{"lr-if":!0});var l=E(t);y.l(l),n=T(l),i=a(l,"TD",{});var L=E(i);c=V(L,h),L.forEach(p),f=T(l),_=a(l,"TD",{});var k=E(_);x=V(k,N),k.forEach(p),v=T(l),m=a(l,"TD",{});var Y=E(m);S=V(Y,g),Y.forEach(p),w=T(l),b=a(l,"TD",{});var F=E(b);D=V(F,O),F.forEach(p),B=T(l),A=a(l,"TD",{});var X=E(A);R=V(X,z),X.forEach(p),U=T(l),r.l(l),P=T(l),l.forEach(p),this.h()},h(){s(t,"lr-if","columnEditIndex != $index")},m(d,l){j(d,t,l),y.m(t,null),e(t,n),e(t,i),e(i,c),e(t,f),e(t,_),e(_,x),e(t,v),e(t,m),e(m,S),e(t,w),e(t,b),e(b,D),e(t,B),e(t,A),e(A,R),e(t,U),r.m(t,null),e(t,P)},p(d,l){r.p(d,l)},d(d){d&&p(t),y.d(),r.d()}}}function ft(o){let t,n='<input type="checkbox" name="select$index" placeholder="Select"/>';return{c(){t=u("td"),t.innerHTML=n},l(i){t=a(i,"TD",{"data-svelte-h":!0}),M(t)!=="svelte-18phl0z"&&(t.innerHTML=n)},m(i,h){j(i,t,h)},d(i){i&&p(t)}}}function _t(o){let t;return{c(){t=u("td")},l(n){t=a(n,"TD",{}),E(t).forEach(p)},m(n,i){j(n,t,i)},d(n){n&&p(t)}}}function vt(o){let t,n,i="Edit",h,c,f="Delete",_,N;function x(){return o[10](o[14])}return{c(){t=u("td"),n=u("button"),n.textContent=i,h=C(),c=u("button"),c.textContent=f,this.h()},l(v){t=a(v,"TD",{"lr-if":!0});var m=E(t);n=a(m,"BUTTON",{type:!0,"data-svelte-h":!0}),M(n)!=="svelte-1qnq4rp"&&(n.textContent=i),h=T(m),c=a(m,"BUTTON",{type:!0,"lr-click":!0,"data-svelte-h":!0}),M(c)!=="svelte-1nbq7qu"&&(c.textContent=f),m.forEach(p),this.h()},h(){s(n,"type","button"),s(c,"type","button"),s(c,"lr-click","deleteColumn($index)"),s(t,"lr-if","$index > 6")},m(v,m){j(v,t,m),e(t,n),e(t,h),e(t,c),_||(N=K(n,"click",x),_=!0)},p(v,m){o=v},d(v){v&&p(t),_=!1,N()}}}function yt(o){let t,n=" ";return{c(){t=u("td"),t.textContent=n,this.h()},l(i){t=a(i,"TD",{"lr-if":!0,"data-svelte-h":!0}),M(t)!=="svelte-8zvfss"&&(t.textContent=n),this.h()},h(){s(t,"lr-if","$index <= 6")},m(i,h){j(i,t,h)},p:$,d(i){i&&p(t)}}}function at(o){let t;function n(c,f){return c[0]!=c[14]?mt:ht}let i=n(o),h=i(o);return{c(){h.c(),t=lt()},l(c){h.l(c),t=lt()},m(c,f){h.m(c,f),j(c,t,f)},p(c,f){i===(i=n(c))&&h?h.p(c,f):(h.d(1),h=i(c),h&&(h.c(),h.m(t.parentNode,t)))},d(c){c&&p(t),h.d(c)}}}function Ct(o){let t,n="Admin / User columns",i,h,c="User fields",f,_,N="Add column",x,v,m,g='<tr><td><input type="checkbox" name="select-all" placeholder="Select all"/></td> <th>Display name</th> <th>Column code</th> <th>Column type</th> <th>Column name</th> <th>Sort Order</th> <th>Control</th></tr>',S,w,b,O,D,B,A="Text",z,R="Number Integer",U,P="Number Real",H,G,y=o[1]&&ut(o),q=nt(o[3]),I=[];for(let r=0;r<q.length;r+=1)I[r]=at(ot(o,q,r));return{c(){t=u("h1"),t.textContent=n,i=C(),h=u("h1"),h.textContent=c,f=C(),_=u("button"),_.textContent=N,x=C(),v=u("table"),m=u("thead"),m.innerHTML=g,S=C(),y&&y.c(),w=C(),b=u("tbody");for(let r=0;r<I.length;r+=1)I[r].c();O=C(),D=u("datalist"),B=u("option"),B.textContent=A,z=u("option"),z.textContent=R,U=u("option"),U.textContent=P,this.h()},l(r){t=a(r,"H1",{"data-svelte-h":!0}),M(t)!=="svelte-o3nl2"&&(t.textContent=n),i=T(r),h=a(r,"H1",{"data-svelte-h":!0}),M(h)!=="svelte-o0zdvi"&&(h.textContent=c),f=T(r),_=a(r,"BUTTON",{type:!0,"data-svelte-h":!0}),M(_)!=="svelte-18wryhz"&&(_.textContent=N),x=T(r),v=a(r,"TABLE",{id:!0});var d=E(v);m=a(d,"THEAD",{"data-svelte-h":!0}),M(m)!=="svelte-15hdz98"&&(m.innerHTML=g),S=T(d),y&&y.l(d),w=T(d),b=a(d,"TBODY",{id:!0});var l=E(b);for(let k=0;k<I.length;k+=1)I[k].l(l);l.forEach(p),d.forEach(p),O=T(r),D=a(r,"DATALIST",{id:!0});var L=E(D);B=a(L,"OPTION",{"data-svelte-h":!0}),M(B)!=="svelte-1mqqvia"&&(B.textContent=A),z=a(L,"OPTION",{"data-svelte-h":!0}),M(z)!=="svelte-1mkb7wl"&&(z.textContent=R),U=a(L,"OPTION",{"data-svelte-h":!0}),M(U)!=="svelte-10956bv"&&(U.textContent=P),L.forEach(p),this.h()},h(){s(_,"type","button"),s(b,"id","column-list-body"),s(v,"id","column-list-container"),B.__value="text",J(B,B.__value),z.__value="number-integer",J(z,z.__value),U.__value="number-real",J(U,U.__value),s(D,"id","column-types")},m(r,d){j(r,t,d),j(r,i,d),j(r,h,d),j(r,f,d),j(r,_,d),j(r,x,d),j(r,v,d),e(v,m),e(v,S),y&&y.m(v,null),e(v,w),e(v,b);for(let l=0;l<I.length;l+=1)I[l]&&I[l].m(b,null);j(r,O,d),j(r,D,d),e(D,B),e(D,z),e(D,U),H||(G=K(_,"click",o[7]),H=!0)},p(r,[d]){if(r[1]?y?y.p(r,d):(y=ut(r),y.c(),y.m(v,w)):y&&(y.d(1),y=null),d&9){q=nt(r[3]);let l;for(l=0;l<q.length;l+=1){const L=ot(r,q,l);I[l]?I[l].p(L,d):(I[l]=at(L),I[l].c(),I[l].m(b,null))}for(;l<I.length;l+=1)I[l].d(1);I.length=q.length}},i:$,o:$,d(r){r&&(p(t),p(i),p(h),p(f),p(_),p(x),p(v),p(O),p(D)),y&&y.d(),st(I,r),H=!1,G()}}}function Tt(o,t,n){let{data:i}=t;const{columns:h}=i;let c=-1,f=!1,_={"display-name":"","column-code":"","column-type":"","column-name":""};function N(){n(1,f=!1)}function x(){console.log(_),N()}const v=()=>{n(1,f=!0)};function m(){_["display-name"]=this.value,n(2,_)}function g(){_["column-code"]=this.value,n(2,_)}const S=b=>{n(0,c=b)},w=()=>{n(0,c=-1)};return o.$$set=b=>{"data"in b&&n(6,i=b.data)},[c,f,_,h,N,x,i,v,m,g,S,w]}class Dt extends it{constructor(t){super(),ct(this,t,Tt,Ct,rt,{data:6})}}export{Dt as component,kt as universal};
